<!DOCTYPE html>
<html lang="es-ES">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Monitorizacion | Blog</title>
  <meta name="description" content="En esta página estatica vamos a guardar algunos de los trabajos que vaya realizando a lo largo del curso de 2ºASIR en el instituto I.E.S. Gonzalo Nazareno.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Monitorizacion" />
<meta property="og:description" content="Monitorización La monitorización de los sistemas que podamos tener en producción es una parte muy importante a la hora de hacer que todos los servicios que ofrecemos con nuestros sitemas funcionen correctamente y, si en el caso de que hubiera un fallo o algun error, gracias a la monitorización de nuestros sitemas, lograr encontrar y solucionar el error.
Hoy dia podemos encontrar una gran cantidad de sistemas de monitorización, ya sean mediante la recolención de metricas, la monitorizacion de los sistemas o usar una gestion de logs centralizada de todos los equipos." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://franjavimn.onrender.com/sistemas/monitorizacion/" /><meta property="article:section" content="Sistemas" />
<meta property="article:published_time" content="2021-02-01T19:22:06&#43;01:00" />
<meta property="article:modified_time" content="2021-02-01T19:22:06&#43;01:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Monitorizacion"/>
<meta name="twitter:description" content="Monitorización La monitorización de los sistemas que podamos tener en producción es una parte muy importante a la hora de hacer que todos los servicios que ofrecemos con nuestros sitemas funcionen correctamente y, si en el caso de que hubiera un fallo o algun error, gracias a la monitorización de nuestros sitemas, lograr encontrar y solucionar el error.
Hoy dia podemos encontrar una gran cantidad de sistemas de monitorización, ya sean mediante la recolención de metricas, la monitorizacion de los sistemas o usar una gestion de logs centralizada de todos los equipos."/>

  
  
    
  
  
  <link rel="stylesheet" href="https://franjavimn.onrender.com/css/style-white.css">
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://franjavimn.onrender.com/images/favicon.ico" />

  
</head>
<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

    <header id="header">
  <a href="https://franjavimn.onrender.com">
  
    <div id="logo" style="background-image: url(https://franjavimn.onrender.com/images/logo.png)"></div>
  
  <div id="title">
    <h1>Blog</h1>
  </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#"><i class="fas fa-bars fa-2x"></i></a>
      </li>
       
        <li><a href="/sistemas">Sistemas</a></li>
       
        <li><a href="/seguridad">Seguridad</a></li>
       
        <li><a href="/servicios">Servicios</a></li>
       
        <li><a href="/implantacion">Implantacion</a></li>
       
        <li><a href="/bbdd">BBDD</a></li>
       
        <li><a href="/hlc">HLC</a></li>
       
        <li><a href="/proyecto-podman">Proyecto Podman</a></li>
      
    </ul>
  </div>
</header>
  

    
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <div class="content" itemprop="articleBody">
  
    <h1 id="monitorización">Monitorización</h1>
<p>La monitorización de los sistemas que podamos tener en producción es una parte muy importante a la hora de hacer que todos los servicios que ofrecemos con nuestros sitemas funcionen correctamente y, si en el caso de que hubiera un fallo o algun error, gracias a la monitorización de nuestros sitemas, lograr encontrar y solucionar el error.</p>
<p>Hoy dia podemos encontrar una gran cantidad de sistemas de monitorización, ya sean mediante la recolención de metricas, la monitorizacion de los sistemas o usar una gestion de logs centralizada de todos los equipos. En este mar de opciones podemos escoger entre muchos sistemas que nos permiten hacer una monitorización de nuestros equipos.</p>
<p>Debemos de tener en cuenta que a la hora de usar la monitorización debemos de tener 3 cosas fundamentales que son, <strong>un recolector de metricas</strong>, <strong>una base de datos</strong> y <strong>un visualizador</strong>, con estos tres componentes podemos hacer una monitorización muy completa de todos nuestros equipos.</p>
<p>El recolector, se encarga de recoger todos los datos de nuestra máquina, continuamente, en tiempo real, para así mandarlo a la base de datos, que será quien lo almacene, y por último el visualizador es quien nos muestra una gráfica con los datos.</p>
<p>Entre todas las opciones a nuestras disposición he optado por usar el sistema <strong>Prometheus</strong> y <strong>Grafana</strong>. De estos dos componentes el visualizador va a ser <strong>Grafana</strong> mientras que <strong>Prometheus</strong> va a actuar como base de datos y como recolector.</p>
<h2 id="prometheus">Prometheus</h2>
<p>Prometheus es un sistema de monitorización de métricas, y generador de alertas, creado por SoundCloud, los que a su vez son ex-empleados de Google. Estos se inspiraron en el sistema de monitorización Borgmon, que se utilizaba para Kubernetes cuando este todavía no era un producto público. Este proyecto forma parte de la Cloud Native Computing Foundation.</p>
<p>Componentes que aporta Prometheus:</p>
<ul>
<li>El servidor de Prometheus para consultar y almacenar la series de datos.</li>
<li>Un Pushgateway para permitir que los trabajos efímeros y por lotes expongan sus métricas a Prometheus.</li>
<li>Exporters útil para casos donde no es factible instrumentar un sistema dado con métricas Prometheus directamente.</li>
<li>Un sistema de manejo de alarmado.</li>
<li>Un sistema de discovery.</li>
</ul>
<p>Los tipos de métricas utilizadas en Prometheus son las siguientes:</p>
<ul>
<li>Counter : es una métrica acumulativa que representa un solo contador cuyo valor puede solamente incrementar o reinicia a cero.</li>
<li>Gauge : es una métrica que representa un solo valor numeral que puede arbitrariamente subir o bajar.</li>
<li>Histogram : muestrea las observaciones y las cuenta en categorías configurables. También proporciona una suma de todo los valores observados.</li>
</ul>
<p>Prometheus se utiliza para monitorizar aplicaciones de kubernete además de utilizarse en conjunto con Grafana para visualizar su monitorización.</p>
<h2 id="grafana">Grafana</h2>
<p>Grafana es un software libre basado en licencia de Apache 2.0, que permite la visualización y el formato de datos métricos. Permite crear cuadros de mando y gráficos a partir de múltiples fuentes. Originalmente comenzó como un componente de Kibana y que luego le fue realizado una bifurcación.</p>
<p>Grafana es multiplataforma sin ninguna dependencia y también se puede implementar con Docker. Está escrito en lenguaje Go y tiene un HTTP API completo. Sus caracteristicas mas generales son las siguientes:</p>
<ul>
<li>Dispondremos de gráficos elegantes para la visualización de datos. Los gráficos son rápidos y flexibles, con numerosas opciones.</li>
<li>Pone a nuestra disposición paneles dinámicos y reutilizables.</li>
<li>Es altamente extensible, podemos utilizar muchos paneles y complementos disponibles en la biblioteca oficial.</li>
<li>Pondrá a nuestra disposición la autenticación a través de LDAP, Google Auth, Grafana.com y Github.</li>
<li>Respalda notablemente la colaboración al permitir el intercambio de datos y cuadros de mando entre equipos.</li>
<li>Está disponible una <a href="https://play.grafana.org/">demostración</a> en línea para que pruebes Grafana antes de instalarlo en tu equipo.</li>
</ul>
<h1 id="instalación-de-grafana--prometheus">Instalación de Grafana + Prometheus</h1>
<p>Para ello lo primero que vamos a ver es que maquina va a ser la que tenga el visualizador <strong>Grafana</strong>, en mi caso va a ser la maquina <strong>Dulcinea</strong> que es la que tiene una interfaz de red hacia el exterior.</p>
<h2 id="instalacion-de-prometheus">Instalacion de Prometheus</h2>
<p>La instalación de <strong>Prometheus</strong> es una tarea muy sencilla ya que solo debemos de instalarlo desde los repositorios, en este caso usando una maquina con Debian 10, para ello solo debemos instalar el paquete llamado <strong>prometheus</strong> que nos instalara tambien servicio de <strong>Prometheus Node Exporter</strong>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#### Instalamos prometheus ####</span>
debian@dulcinea:~$ sudo apt update <span style="color:#f92672">&amp;&amp;</span> sudo apt install prometheus

<span style="color:#75715e">#### Comprobamos la version ####</span>
debian@dulcinea:~$ prometheus --version
prometheus, version 2.7.1+ds <span style="color:#f92672">(</span>branch: debian/sid, revision: 2.7.1+ds-3+b11<span style="color:#f92672">)</span>
  build user:       pkg-go-maintainers@lists.alioth.debian.org
  build date:       20190608-09:54:04
  go version:       go1.11.6
</code></pre></div><p>Ahora que tenemos <strong>Prometheus</strong> instalado, si nos vamos a nuestro navegador y ponemos la ip de nuestra maquina y el puerto <strong>9100</strong> veremos que nos llevara a un panel donde podremos hacer consultas sobre las metricas que esta recolectando el recolector:</p>
<p><img src="https://raw.githubusercontent.com/FranJaviMN/elementos-grado/main/sistemas/monitorizacion/prometheus-dulcinea.png" alt="dashboard prometheus"></p>
<h2 id="instalacion-de-grafana">Instalacion de Grafana</h2>
<p>A continuación debemos de instalar <strong>Grafana</strong> y podemos optar por dos caminos, el primero es instalarlo desde repositorio pero nos instalará una version mas antigua de Grafana de la que tenemos en su pagina oficial, o podemos usar la ultima version descargando el paquete manualmente. Yo optare por la segunda opción y lo instalaremos desde la ultima version que este en la <a href="https://grafana.com/grafana/download?plcmt=top-nav&amp;cta=downloads">pagina oficial</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#### Instalamos los paquetes necesarios ####</span>
debian@dulcinea:~$ sudo apt install libfontconfig1

<span style="color:#75715e">#### Descargamos el fichero .deb ####</span>
debian@dulcinea:~$ wget https://dl.grafana.com/oss/release/grafana_7.3.7_amd64.deb

<span style="color:#75715e">#### Instalamos el fichero .deb ####</span>
debian@dulcinea:~$ sudo dpkg -i grafana_7.3.7_amd64.deb

<span style="color:#75715e">#### Habilitamos el demonio de grafana y lo iniciamos ####</span>
debian@dulcinea:~$ sudo systemctl enable grafana-server
debian@dulcinea:~$ sudo systemctl start grafana-server
</code></pre></div><p>Una vez lo tengamos listo solo debemos de irnos a nuestro navegador y entrar en la ip de nuestra maquina y al puerto 3000 que es donde escucha <strong>Grafana</strong> y nos aparecera el login que, por defecto es <em>admin/admin</em>:</p>
<p><img src="https://raw.githubusercontent.com/FranJaviMN/elementos-grado/main/sistemas/monitorizacion/grafana-dulcinea.png" alt="grafana dulcinea"></p>
<p>Una vez lo hayamos instalado debemos de añadir a nuestro <strong>Grafana</strong> un nuevo <em>datasource</em> en este caso va a ser <strong>Prometheus</strong> por lo que solo debemos de seguir los pasos que nos indica en las ventanas del <em>datasource</em>.</p>
<p>Una vez lo tengamos vamos a instalar un <em>dashboard</em> en el que vamos a tener una gran cantidad de metricas pero tambien las mas generales, para ello debemos de irnos a la zona de importar un nuevo <em>dashboard</em> y elegimos la zona donde dice <strong>Importar por id</strong> e introducimos el id <em>1860</em>.</p>
<p>Cuando lo hagamos debemos de tener un <em>dashboard</em> como el siguiente:</p>
<p><img src="https://raw.githubusercontent.com/FranJaviMN/elementos-grado/main/sistemas/monitorizacion/dashboard-grafana.png" alt="dashboard grafana"></p>
<h2 id="monitorización-de-maquinas">Monitorización de maquinas</h2>
<p>Ya tenemos las herramientas listas para monitorear nuestras maquinas en nuestro escenario y tambien nuestra maquina de ovh, por lo que debemos de indicarle a nuestra maquina con grafana que debe de recoger metricas desde las distintas maquinas que tenemos, primero vamos a hacerlo con nuestra maquina de ovh.</p>
<h3 id="ovh">OVH</h3>
<p>Debemos de acceder a nuestra maquina de ovh y alli debemos de instalar el recolector de <strong>Prometheus</strong> el cual se encuentra en los repositorios de debian y podemos instalarlo de forma muy sencilla, el paquete que debemos de instalar se llama <strong>prometheus-node-exporter</strong>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#### En nuestra maquina de ovh instalamos el paquete ####</span>
debian@omega:~$ sudo apt install prometheus-node-exporter

<span style="color:#75715e">#### Lo habilitamos e iniciamos ####</span>
debian@omega:~$ sudo systemctl enable prometheus-node-exporter

debian@omega:~$ sudo systemctl start prometheus-node-exporter
</code></pre></div><p>Una vez tengamos todo esto hecho ya tendremos el recolector recogiendo las metricas de nuestra maquina, por lo que ahora debemos de irnos a la maquina donde tenemos <strong>Prometheus</strong> instalado y alli debemos de modificar el fichero llamado <strong>/etc/prometheus/prometheus.yml</strong> y en la seccion <em>scrape_configs:</em> y en <em>job_name: node</em> debemos de indicar la ip de la maquina y el puerto por el que va a escuchar:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml">- <span style="color:#f92672">job_name</span>: <span style="color:#ae81ff">node</span>
    <span style="color:#75715e"># If prometheus-node-exporter is installed, grab stats about the local</span>
    <span style="color:#75715e"># machine by default.</span>
    <span style="color:#f92672">static_configs</span>:
      - <span style="color:#f92672">targets</span>: [<span style="color:#e6db74">&#39;localhost:9100&#39;</span>,<span style="color:#e6db74">&#39;146.59.196.94:9100&#39;</span>]
</code></pre></div><p>Una vez hecho eso reiniciamos el servicio de <strong>Prometheus</strong> en nuestra maquina <strong>Dulcinea</strong> y nos dirigimos a nuestro <em>dashboard</em> en cual veremos una pestaña donde pone <em>host</em> y ahi elegimos la maquina de ovh para ver sus metricas:</p>
<p><img src="https://raw.githubusercontent.com/FranJaviMN/elementos-grado/main/sistemas/monitorizacion/metricas-ovh.png" alt="metricas ovh"></p>
<h3 id="freston-y-sancho">Freston y Sancho</h3>
<p>Para ello solo debemos de siguir los pasos que hemos seguido en la maquina de ovh ya que son la misma distribución por lo que solo debemos de instalar el recolector, habilitarlo, iniciarlo y modificar el fichero en la maquina <strong>Dulcinea</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#### Instalamos el recolector en freston y sancho####</span>
debian@freston:~$ sudo apt update <span style="color:#f92672">&amp;&amp;</span> sudo apt install prometheus-node-exporter

ubuntu@sancho:~$ sudo apt update <span style="color:#f92672">&amp;&amp;</span> sudo apt install prometheus-node-exporter

<span style="color:#75715e">#### Lo habilitamos e iniciamos ####</span>
debian@freston:~$ sudo systemctl enable prometheus-node-exporter

debian@freston:~$ sudo systemctl start prometheus-node-exporter

ubuntu@sancho:~$ sudo systemctl enable prometheus-node-exporter

ubuntu@sancho:~$ sudo systemctl start prometheus-node-exporter

</code></pre></div><p>Hecho esto solo debemos de modificar el fichero de <strong>/etc/prometheus/prometheus.yml</strong> y añadimos la nueva maquina, en este caso en vez de poner la ip, como tenemos el nombre de la maquina en nuestro DNS, solo debemos de poner el nombre de dicha maquina:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml">- <span style="color:#f92672">job_name</span>: <span style="color:#ae81ff">node</span>
    <span style="color:#75715e"># If prometheus-node-exporter is installed, grab stats about the local</span>
    <span style="color:#75715e"># machine by default.</span>
    <span style="color:#f92672">static_configs</span>:
      - <span style="color:#f92672">targets</span>: [<span style="color:#e6db74">&#39;localhost:9100&#39;</span>,<span style="color:#e6db74">&#39;146.59.196.94:9100&#39;</span>,<span style="color:#e6db74">&#39;freston:9100&#39;</span>,<span style="color:#e6db74">&#39;sancho:9100&#39;</span>]
</code></pre></div><p>Una vez hecho eso reiniciamos el servicio de <strong>Prometheus</strong> en nuestra maquina <strong>Dulcinea</strong> y nos dirigimos a nuestro <em>dashboard</em> en cual veremos una pestaña donde pone <em>host</em> y ahi elegimos la maquina <strong>Freston</strong> o la maquina <strong>Sancho</strong> para ver sus metricas:</p>
<p><img src="https://raw.githubusercontent.com/FranJaviMN/elementos-grado/main/sistemas/monitorizacion/metricas-freston.png" alt="metricas freston"></p>
<p>Y aqui podemos ver las metricas de <strong>Sancho</strong>:</p>
<p><img src="https://raw.githubusercontent.com/FranJaviMN/elementos-grado/main/sistemas/monitorizacion/metricas-sancho.png" alt="metricas sancho"></p>
<h3 id="maquina-quijote">Maquina Quijote</h3>
<p>Nuestra maquina <strong>Quijote</strong> es una Centos8 por lo que la instalación del recolector varia un poco respecto a las anteriores instalaciones en las maquinas con Debian y Ubuntu ya que no estan los paquetes de <strong>Prometheus</strong> por lo que tenemos que instalarlos a mano aunque parezca un poco complicado al final no es tan dificil.</p>
<p>Lo primero que debemos de hacer es descargar el paquete de <strong>Prometheus node exporter</strong> el cual podemos encontrar en su repositorio de github, en mi caso la version a descargar es la version <strong>1.0.1</strong>. Una vez descargado debemos de seguir los siguientes pasos que se van a describir a continuación:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#### Añadimos el usuario node_exporter ####</span>
<span style="color:#f92672">[</span>root@quijote ~<span style="color:#f92672">]</span><span style="color:#75715e"># useradd -M -r -s /bin/false node_exporter</span>

<span style="color:#f92672">[</span>root@quijote ~<span style="color:#f92672">]</span><span style="color:#75715e"># id node_exporter</span>
uid<span style="color:#f92672">=</span>992<span style="color:#f92672">(</span>node_exporter<span style="color:#f92672">)</span> gid<span style="color:#f92672">=</span>988<span style="color:#f92672">(</span>node_exporter<span style="color:#f92672">)</span> groups<span style="color:#f92672">=</span>988<span style="color:#f92672">(</span>node_exporter<span style="color:#f92672">)</span>


<span style="color:#75715e">#### Descargamos el paquete en /tmp/ ####</span>
<span style="color:#f92672">[</span>root@quijote tmp<span style="color:#f92672">]</span><span style="color:#75715e"># wget https://github.com/prometheus/node_exporter/releases/download/v1.0.1/node_exporter-1.0.1.linux-amd64.tar.gz</span>

<span style="color:#75715e">#### Lo descomprimimos y movemos el binario a /usr/local/bin/ ####</span>
<span style="color:#f92672">[</span>root@quijote tmp<span style="color:#f92672">]</span><span style="color:#75715e"># tar xzf node_exporter-1.0.1.linux-amd64.tar.gz</span>

<span style="color:#f92672">[</span>root@quijote tmp<span style="color:#f92672">]</span><span style="color:#75715e"># cp node_exporter-1.0.1.linux-amd64/node_exporter /usr/local/bin/</span>

<span style="color:#75715e">#### Modificamos los permisos del binario ####</span>
<span style="color:#f92672">[</span>root@quijote ~<span style="color:#f92672">]</span><span style="color:#75715e"># chown node_exporter:node_exporter /usr/local/bin/node_exporter</span>

<span style="color:#75715e">#### Creamos una unidad de systemd ####</span>
<span style="color:#f92672">[</span>root@quijote ~<span style="color:#f92672">]</span><span style="color:#75715e"># nano /etc/systemd/system/node_exporter.service</span>

<span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
Description<span style="color:#f92672">=</span>Prometheus Node Exporter
Wants<span style="color:#f92672">=</span>network-online.target
After<span style="color:#f92672">=</span>network-online.target

<span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
User<span style="color:#f92672">=</span>node_exporter
Group<span style="color:#f92672">=</span>node_exporter
Type<span style="color:#f92672">=</span>simple
ExecStart<span style="color:#f92672">=</span>/usr/local/bin/node_exporter

<span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
WantedBy<span style="color:#f92672">=</span>multi-user.target

<span style="color:#75715e">#### Reinciamos y habilitamos el nuevo servicio ####</span>
<span style="color:#f92672">[</span>root@quijote ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl daemon-reload</span>

<span style="color:#f92672">[</span>root@quijote ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl enable --now node_exporter.service</span>

<span style="color:#f92672">[</span>root@quijote ~<span style="color:#f92672">]</span><span style="color:#75715e"># systemctl status node_exporter</span>
● node_exporter.service - Prometheus Node Exporter
   Loaded: loaded <span style="color:#f92672">(</span>/etc/systemd/system/node_exporter.service; enabled; v&gt;
   Active: active <span style="color:#f92672">(</span>running<span style="color:#f92672">)</span> since Mon 2021-02-01 19:02:48 CET; 27s ago

<span style="color:#75715e">#### Comprobamos que este escuchando en el puerto 9100 ####</span>
<span style="color:#f92672">[</span>root@quijote ~<span style="color:#f92672">]</span><span style="color:#75715e"># ss -altnp | grep 91</span>
LISTEN    <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">128</span>                      *:9100                   *:*        users:<span style="color:#f92672">((</span><span style="color:#e6db74">&#34;node_exporter&#34;</span>,pid<span style="color:#f92672">=</span>2169,fd<span style="color:#f92672">=</span>3<span style="color:#f92672">))</span>                          

<span style="color:#75715e">#### Lo habilitamos en el firewall ####</span>
<span style="color:#f92672">[</span>root@quijote ~<span style="color:#f92672">]</span><span style="color:#75715e"># firewall-cmd --add-rich-rule &#39;rule family=&#34;ipv4&#34; port port=9100 protocol=tcp accept&#39; --permanent</span>

<span style="color:#f92672">[</span>root@quijote ~<span style="color:#f92672">]</span><span style="color:#75715e"># firewall-cmd --reload</span>
</code></pre></div><p>Hecho esto solo nos queda poner en nuestro fichero de configuración de Dulcinea a nuestra maquina <strong>Quijote</strong>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml">- <span style="color:#f92672">job_name</span>: <span style="color:#ae81ff">node</span>
    <span style="color:#75715e"># If prometheus-node-exporter is installed, grab stats about the local</span>
    <span style="color:#75715e"># machine by default.</span>
    <span style="color:#f92672">static_configs</span>:
      - <span style="color:#f92672">targets</span>: [<span style="color:#e6db74">&#39;localhost:9100&#39;</span>,<span style="color:#e6db74">&#39;146.59.196.94:9100&#39;</span>,<span style="color:#e6db74">&#39;freston:9100&#39;</span>,<span style="color:#e6db74">&#39;sancho:9100&#39;</span>,<span style="color:#e6db74">&#39;quijote:9100&#39;</span>]
</code></pre></div><p>De esta forma tendremos en nuestro <em>dashboard</em> a nuestra maquina <strong>Quijote</strong>:</p>
<p><img src="https://raw.githubusercontent.com/FranJaviMN/elementos-grado/main/sistemas/monitorizacion/metricas-quijote.png" alt="metricas quijote"></p>

  
  </div>
</article>


    <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2021  Francisco Javier Martín Núñez 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/sistemas">Sistemas</a></li>
         
        <li><a href="/seguridad">Seguridad</a></li>
         
        <li><a href="/servicios">Servicios</a></li>
         
        <li><a href="/implantacion">Implantacion</a></li>
         
        <li><a href="/bbdd">BBDD</a></li>
         
        <li><a href="/hlc">HLC</a></li>
         
        <li><a href="/proyecto-podman">Proyecto Podman</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
  
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
</html>
