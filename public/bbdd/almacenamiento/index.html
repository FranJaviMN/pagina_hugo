<!DOCTYPE html>
<html lang="es-ES">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Almacenamiento | Blog</title>
  <meta name="description" content="En esta página estatica vamos a guardar algunos de los trabajos que vaya realizando a lo largo del curso de 2ºASIR en el instituto I.E.S. Gonzalo Nazareno.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Almacenamiento" />
<meta property="og:description" content="Oracle  Crea un tablespace de undo e intenta crear una tabla en él.  Creamos el tablespace de nombre undo_oracle1 y con un datafile de nombre tablespaceundo1:
SQL&gt; create undo tablespace undo_oracle1 DATAFILE &#39;tablespaceundo1.dbf&#39; size 100M autoextend on; Tablespace creado. Ahora bien, si intentamos crear una table en dicho tablespace nos saldrá el siguiente error:
SQL&gt; create table prueba1( 2 nombre varchar2(10)) 3 tablespace undo_oracle1; create table prueba1( * ERROR en lÝnea 1: ORA-30022: No se pueden crear segmentos en un tablespace de deshacer Crea un tablespace temporal TEMP2 y escribe una sentencia SQL que genere un script que haga usar TEMP2 a todos los usuarios que tienen USERS como tablespace por defecto." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://franjavimn.onrender.com/bbdd/almacenamiento/" />
<meta property="article:published_time" content="2021-02-18T18:22:31+01:00" />
<meta property="article:modified_time" content="2021-02-18T18:22:31+01:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Almacenamiento"/>
<meta name="twitter:description" content="Oracle  Crea un tablespace de undo e intenta crear una tabla en él.  Creamos el tablespace de nombre undo_oracle1 y con un datafile de nombre tablespaceundo1:
SQL&gt; create undo tablespace undo_oracle1 DATAFILE &#39;tablespaceundo1.dbf&#39; size 100M autoextend on; Tablespace creado. Ahora bien, si intentamos crear una table en dicho tablespace nos saldrá el siguiente error:
SQL&gt; create table prueba1( 2 nombre varchar2(10)) 3 tablespace undo_oracle1; create table prueba1( * ERROR en lÝnea 1: ORA-30022: No se pueden crear segmentos en un tablespace de deshacer Crea un tablespace temporal TEMP2 y escribe una sentencia SQL que genere un script que haga usar TEMP2 a todos los usuarios que tienen USERS como tablespace por defecto."/>

  
  
    
  
  
  <link rel="stylesheet" href="https://franjavimn.onrender.com/css/style-white.css">
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://franjavimn.onrender.com/images/favicon.ico" />

  
</head>
<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

    <header id="header">
  <a href="https://franjavimn.onrender.com">
  
    <div id="logo" style="background-image: url(https://franjavimn.onrender.com/images/logo.png)"></div>
  
  <div id="title">
    <h1>Blog</h1>
  </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#"><i class="fas fa-bars fa-2x"></i></a>
      </li>
       
        <li><a href="/sistemas">Sistemas</a></li>
       
        <li><a href="/seguridad">Seguridad</a></li>
       
        <li><a href="/servicios">Servicios</a></li>
       
        <li><a href="/implantacion">Implantacion</a></li>
       
        <li><a href="/bbdd">BBDD</a></li>
       
        <li><a href="/hlc">HLC</a></li>
       
        <li><a href="/cloud">Cloud</a></li>
      
    </ul>
  </div>
</header>
  

    
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <div class="content" itemprop="articleBody">
  
    <h1 id="oracle">Oracle</h1>
<ol>
<li>Crea un tablespace de undo e intenta crear una tabla en él.</li>
</ol>
<p>Creamos el <em>tablespace</em> de nombre <em>undo_oracle1</em> y con un datafile de nombre <em>tablespaceundo1</em>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">create</span> undo tablespace undo_oracle1 DATAFILE <span style="color:#e6db74">&#39;tablespaceundo1.dbf&#39;</span> <span style="color:#66d9ef">size</span> <span style="color:#ae81ff">100</span>M autoextend <span style="color:#66d9ef">on</span>;

Tablespace creado.
</code></pre></div><p>Ahora bien, si intentamos crear una table en dicho tablespace nos saldrá el siguiente error:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> prueba1(
  <span style="color:#ae81ff">2</span>  nombre varchar2(<span style="color:#ae81ff">10</span>))
  <span style="color:#ae81ff">3</span>  tablespace undo_oracle1;
<span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> prueba1(
<span style="color:#f92672">*</span>
ERROR en lÝnea <span style="color:#ae81ff">1</span>:
ORA<span style="color:#f92672">-</span><span style="color:#ae81ff">30022</span>: <span style="color:#66d9ef">No</span> se pueden crear segmentos en un tablespace de deshacer
</code></pre></div><ol start="2">
<li>Crea un tablespace temporal TEMP2 y escribe una sentencia SQL que genere un script que haga usar TEMP2 a todos los usuarios que tienen USERS como tablespace por defecto.</li>
</ol>
<p>Lo primero que debemos de hacer es crear dicho <em>tablespace</em> por lo que lo creamos:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TEMPORARY</span> TABLESPACE TEMPORAL TEMPFILE  <span style="color:#e6db74">&#39;temp1.dbf&#39;</span> <span style="color:#66d9ef">SIZE</span> <span style="color:#ae81ff">100</span>M;

Tablespace creado.
</code></pre></div><p>Una vez creado dicho <em>tablespace</em> temporal, debemos de ejecutar la siguiente sentencia sql que cambiara el <em>tablespace</em> de todos los usuarios que se encuentren en el <em>tablespace users</em>, para ello debemos, primero, sacar a los usuarios que se encuentran en dicho <em>tablespace</em>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> USERNAME <span style="color:#66d9ef">from</span> DBA_USERS <span style="color:#66d9ef">where</span> DEFAULT_TABLESPACE<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;USERS&#39;</span>;
USERNAME
<span style="color:#75715e">------------------------------
</span><span style="color:#75715e"></span>SCOTT
FRAN
PRUEBAS
USRPRACTICA1
...
</code></pre></div><ol start="3">
<li>Borra todos los tablespaces creados para esta práctica sin que quede rastro de ellos. Realiza las acciones previas que sean necesarias.</li>
</ol>
<p>Para ello, solo debemos de borrar los que hemos creado, en este caso solo hemos creado dos que son <em>TEMPORAL</em> y <em>undo_oracle1</em>, para ello debemos de usar las siguientes sentencias de SQL:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#f92672">####</span> Borramos el tablespace TEMPORAL <span style="color:#f92672">####</span>
<span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">DROP</span> TABLESPACE TEMPORAL <span style="color:#66d9ef">INCLUDING</span> CONTENTS <span style="color:#66d9ef">AND</span> DATAFILES;

Tablespace borrado.

<span style="color:#f92672">####</span> Borramos el tablespace undo_oracle1 <span style="color:#f92672">####</span>
<span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">DROP</span> TABLESPACE undo_oracle1 <span style="color:#66d9ef">INCLUDING</span> CONTENTS <span style="color:#66d9ef">AND</span> DATAFILES;

Tablespace borrado.
</code></pre></div><ol start="4">
<li>Averigua los segmentos existentes para realizar un ROLLBACK y el tamaño de sus extensiones.</li>
</ol>
<p>Para ello debemos de hacer una consulta a <strong>DBA_ROLLBACK_SEGS</strong> seleccionando los campos de <em>SEGMENT_NAME y INITIAL_EXTENT</em> para asi obtener el nombre de los segmentos que existen y el tamaño de estos:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> SEGMENT_NAME, INITIAL_EXTENT <span style="color:#66d9ef">FROM</span> DBA_ROLLBACK_SEGS;

SEGMENT_NAME                   INITIAL_EXTENT
<span style="color:#75715e">------------------------------ --------------
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SYSTEM</span>                                 <span style="color:#ae81ff">114688</span>
_SYSSMU10_378818850$                   <span style="color:#ae81ff">131072</span>
_SYSSMU9_3186340089$                   <span style="color:#ae81ff">131072</span>
_SYSSMU8_1682283174$                   <span style="color:#ae81ff">131072</span>
_SYSSMU7_1101470402$                   <span style="color:#ae81ff">131072</span>
_SYSSMU6_1439239625$                   <span style="color:#ae81ff">131072</span>
_SYSSMU5_2520346804$                   <span style="color:#ae81ff">131072</span>
_SYSSMU4_1451910634$                   <span style="color:#ae81ff">131072</span>
_SYSSMU3_478608968$                    <span style="color:#ae81ff">131072</span>
_SYSSMU2_1531987058$                   <span style="color:#ae81ff">131072</span>
_SYSSMU1_3086899707$                   <span style="color:#ae81ff">131072</span>

<span style="color:#ae81ff">11</span> filas seleccionadas.
</code></pre></div><p>Si queremos mas información respecto a dichos segmentos, podemos hacer una consulta a <strong>DBA_EXTENTS</strong>.</p>
<ol start="5">
<li>
<p>Queremos limpiar nuestro fichero tnsnames.ora. Averigua cuales de sus entradas se están usando en algún enlace de la base de datos.</p>
</li>
<li>
<p>Escribe una entrada en tu blog explicando las limitaciones de Postgres y MariaDB respecto a ORACLE en cuanto a la gestión del almacenamiento.</p>
</li>
</ol>
<p>Para ello podemos ver la entrada del blog en el siguiente <a href="https://franjavimn.onrender.com/bbdd/diferencias-almacenamiento/">enlace</a></p>
<h1 id="postgres">Postgres</h1>
<ol start="7">
<li>Averigua si pueden establecerse claúsulas de almacenamiento para las tablas o los espacios de tablas en Postgres.</li>
</ol>
<p>El concepto de <em>tablespace</em> en postgres si existe aunque con diferencias en cuanto a funcionalidad respecto a la versión de estos en oracle. Los <em>tablespace</em> en postgres aportan una mejora al sistema ya que permiten una segmentación y una dictribución física de los datos mucho mas eficiente ya que estos los podemos guardar en diversos <strong>directorios</strong>. Como ejemplo practico seria la creacion de un <em>tablespace</em> con los datos de acceso mas concurridos en el mismo disco duro local.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#f92672">####</span> ORACLE <span style="color:#f92672">####</span>
<span style="color:#66d9ef">CREATE</span> [<span style="color:#66d9ef">TEMPORARY</span><span style="color:#f92672">|</span>UNDO] TABLESPACE nombrets
[DATAFILE<span style="color:#f92672">|</span>TEMPFILE] ruta_absoluta_fichero [<span style="color:#66d9ef">SIZE</span> nº [K<span style="color:#f92672">|</span>M]][REUSE][AUTOEXTEND <span style="color:#66d9ef">ON</span> [MAXSIZE n M]]
<span style="color:#960050;background-color:#1e0010">…</span> (podemos añadir más ficheros separando con comas)...
[LOGGING<span style="color:#f92672">|</span>NOLOGGING]
[PERMANENT<span style="color:#f92672">|</span><span style="color:#66d9ef">TEMPORARY</span>]
[<span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">STORAGE</span>
(clausulas de almacenamiento)]
[OFFLINE];

<span style="color:#f92672">####</span> POSTGRES <span style="color:#f92672">####</span>
<span style="color:#66d9ef">CREATE</span> TABLESPACE tablespace_name
    [ <span style="color:#66d9ef">OWNER</span> <span style="color:#960050;background-color:#1e0010">{</span> new_owner <span style="color:#f92672">|</span> <span style="color:#66d9ef">CURRENT_USER</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">SESSION_USER</span> <span style="color:#960050;background-color:#1e0010">}</span> ]
    <span style="color:#66d9ef">LOCATION</span> <span style="color:#e6db74">&#39;directory&#39;</span>
    [ <span style="color:#66d9ef">WITH</span> ( tablespace_option <span style="color:#f92672">=</span> value [, ... ] ) ]
</code></pre></div><h1 id="mariadb">MariaDB</h1>
<ol start="8">
<li>Averigua si existe el concepto de índice en MySQL y si coincide con el existente en ORACLE. Explica los distintos tipos de índices existentes.</li>
</ol>
<p>El concepto de índice en MySQL si existe y tiene varios tipos:</p>
<ul>
<li><strong>Parciales</strong>:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">INDEX</span> idx_Alumnos_direccion <span style="color:#66d9ef">ON</span> Alumnos (direccion(<span style="color:#ae81ff">100</span>))
</code></pre></div><ul>
<li><strong>Multicolumna</strong>: Este tipo de índices abarca más de una columna. Por ejemplo, nombre y apellidos.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">INDEX</span> idx_Alumnos_nombre_apellidos <span style="color:#66d9ef">ON</span> Alumnos (apellidos(<span style="color:#ae81ff">100</span>),nombre)
</code></pre></div><ul>
<li><strong>Secundarios o clusters: Normalmente</strong>, este índice es sinónimo de la clave primaria. Así, si tengo creado como índice de clave primaria una columna id, físicamente los registros estarán:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">ID<span style="color:#75715e">-------Nombre
</span><span style="color:#75715e"></span><span style="color:#ae81ff">1</span><span style="color:#75715e">--------Angel
</span><span style="color:#75715e"></span><span style="color:#ae81ff">2</span><span style="color:#75715e">--------Maria
</span><span style="color:#75715e"></span><span style="color:#ae81ff">3</span><span style="color:#75715e">--------Juan
</span><span style="color:#75715e"></span><span style="color:#ae81ff">4</span><span style="color:#75715e">--------Ana
</span></code></pre></div><h2 id="estructura-de-índices">Estructura de índices</h2>
<ul>
<li><strong>Tipo B-Tree</strong>:</li>
</ul>
<p>Su uso es adecuado para consultas basadas en operadores de comparación (&lt;,&gt;, =, &lt; &gt;) y rangos de valores (between).</p>
<p>El índice también se puede usar LIKE para realizar comparaciones.</p>
<ul>
<li><strong>Tipo HASH</strong>:</li>
</ul>
<p>Se basan en el uso de una función de HASH. Este tipo de función, transforma una entrada en un valor único. Se usan solo para comparaciones de igualdad que usan los operadores = o &lt;=&gt;. Este tipo de índice no se puede utilizar para buscar la siguiente entrada en orden.</p>
<h1 id="mongodb">MongoDB</h1>
<ol start="9">
<li>Explica los distintos motores de almacenamiento que ofrece MongoDB, sus características principales y en qué casos es más recomendable utilizar cada uno de ellos.</li>
</ol>
<p><strong>MMAP</strong> y <strong>WiredTiger</strong> son los motores de almacenamiento estable. Siendo MMAP el predeterminado en la versión 3.0. A partir de la versión 3.2 WiredTiger se convierte en el motor predeterminado.</p>
<p>Los tipos de motores que nos ofrecen son los siguientes:</p>
<ul>
<li>
<p><strong>Fusión-io</strong>: Un motor de almacenamiento creado por SanDisk que hace posible omitir la capa del sistema de archivos del sistema operativo y escribir directamente en el dispositivo de almacenamiento.</p>
</li>
<li>
<p><strong>En memoria</strong>: Todos los datos se almacenan en la memoria (RAM) para una lectura / acceso más rápidos.</p>
</li>
<li>
<p><strong>MMAP</strong>: MMAP es el motor de almacenamiento utilizado en versiones anteriores, mejora su rendimiento con el soporte de bloqueo a nivel de colección a partir de la versión 3.0. Asigna archivos a la memoria virtual y optimiza las llamadas de lectura.</p>
<p>Una desventaja es que no se pueden procesar dos llamadas de escritura en paralelo para la misma colección.</p>
</li>
<li>
<p><strong>mongo-rocks</strong>: Un motor de valor-clave creado para integrarse con RocksDB.</p>
</li>
<li>
<p><strong>TokuMX</strong>: Un motor de almacenamiento creado por Percona que utiliza índices de árboles fractales.</p>
</li>
<li>
<p><strong>WiredTiger</strong>: WiredTiger es un motor de almacenamiento moderno diseñado para sacar el máximo rendimiento del hardware multi-core, y minimizar el acceso a disco gracias al uso de un formato de ficheros compacto y de la compresión de datos.</p>
<p>Para activar WiredTiger se debe iniciar MongoDB usando la opción storageEngine:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mongod —storageEngine wiredtiger
</code></pre></div></li>
</ul>
<h1 id="fuentes-consultadas">Fuentes Consultadas:</h1>
<p>Mysql Indices - <a href="https://wiki.cifprodolfoucha.es/index.php?title=Mysql_Indices#Estructura_de_.C3.ADndices">https://wiki.cifprodolfoucha.es/index.php?title=Mysql_Indices#Estructura_de_.C3.ADndices</a></p>
<p>Indexes(MongoDB) - <a href="https://docs.mongodb.com/manual/indexes/">https://docs.mongodb.com/manual/indexes/</a></p>
<p>Pluggable Storage Engines - <a href="https://riptutorial.com/mongodb/topic/694/pluggable-storage-engines">https://riptutorial.com/mongodb/topic/694/pluggable-storage-engines</a></p>

  
  </div>
</article>


    <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2021  Francisco Javier Martín Núñez 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/sistemas">Sistemas</a></li>
         
        <li><a href="/seguridad">Seguridad</a></li>
         
        <li><a href="/servicios">Servicios</a></li>
         
        <li><a href="/implantacion">Implantacion</a></li>
         
        <li><a href="/bbdd">BBDD</a></li>
         
        <li><a href="/hlc">HLC</a></li>
         
        <li><a href="/cloud">Cloud</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
  
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
</html>
