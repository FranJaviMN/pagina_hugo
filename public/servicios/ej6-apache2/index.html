<!DOCTYPE html>
<html lang="es-ES">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Ej6 Apache2 | Blog</title>
  <meta name="description" content="En esta página estatica vamos a guardar algunos de los trabajos que vaya realizando a lo largo del curso de 2ºASIR en el instituto I.E.S. Gonzalo Nazareno.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Ej6 Apache2" />
<meta property="og:description" content="Configuración de apache mediante archivo .htaccess Un fichero .htaccess (hypertext access), también conocido como archivo de configuración distribuida, es un fichero especial, popularizado por el Servidor HTTP Apache que nos permite definir diferentes directivas de configuración para cada directorio (con sus respectivos subdirectorios) sin necesidad de editar el archivo de configuración principal de Apache.
Para permitir el uso de los ficheros .htaccess o restringir las directivas que se pueden aplicar usamos ela directiva AllowOverride, que puede ir acompañada de una o varias opciones: All, AuthConfig, FileInfo, Indexes, Limit, …" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://franjavimn.onrender.com/servicios/ej6-apache2/" />
<meta property="article:published_time" content="2020-11-02T17:15:07+01:00" />
<meta property="article:modified_time" content="2020-11-02T17:15:07+01:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Ej6 Apache2"/>
<meta name="twitter:description" content="Configuración de apache mediante archivo .htaccess Un fichero .htaccess (hypertext access), también conocido como archivo de configuración distribuida, es un fichero especial, popularizado por el Servidor HTTP Apache que nos permite definir diferentes directivas de configuración para cada directorio (con sus respectivos subdirectorios) sin necesidad de editar el archivo de configuración principal de Apache.
Para permitir el uso de los ficheros .htaccess o restringir las directivas que se pueden aplicar usamos ela directiva AllowOverride, que puede ir acompañada de una o varias opciones: All, AuthConfig, FileInfo, Indexes, Limit, …"/>

  
  
    
  
  
  <link rel="stylesheet" href="https://franjavimn.onrender.com/css/style-white.css">
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://franjavimn.onrender.com/images/favicon.ico" />

  
</head>
<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

    <header id="header">
  <a href="https://franjavimn.onrender.com">
  
    <div id="logo" style="background-image: url(https://franjavimn.onrender.com/images/logo.png)"></div>
  
  <div id="title">
    <h1>Blog</h1>
  </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#"><i class="fas fa-bars fa-2x"></i></a>
      </li>
       
        <li><a href="/sistemas">Sistemas</a></li>
       
        <li><a href="/seguridad">Seguridad</a></li>
       
        <li><a href="/servicios">Servicios</a></li>
       
        <li><a href="/implantacion">Implantacion</a></li>
       
        <li><a href="/bbdd">BBDD</a></li>
       
        <li><a href="/hlc">HLC</a></li>
       
        <li><a href="/cloud">Cloud</a></li>
      
    </ul>
  </div>
</header>
  

    
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <div class="content" itemprop="articleBody">
  
    <h1 id="configuración-de-apache-mediante-archivo-htaccess">Configuración de apache mediante archivo .htaccess</h1>
<p>Un fichero .htaccess (hypertext access), también conocido como archivo de configuración distribuida, es un fichero especial, popularizado por el Servidor HTTP Apache que nos permite definir diferentes directivas de configuración para cada directorio (con sus respectivos subdirectorios) sin necesidad de editar el archivo de configuración principal de Apache.</p>
<p>Para permitir el uso de los ficheros .htaccess o restringir las directivas que se pueden aplicar usamos ela directiva AllowOverride, que puede ir acompañada de una o varias opciones: All, AuthConfig, FileInfo, Indexes, Limit, …</p>
<h2 id="ejercicios">Ejercicios</h2>
<p>Date de alta en un proveedor de hosting. ¿Si necesitamos configurar el servidor web que han configurado los administradores del proveedor?, ¿qué podemos hacer? Explica la directiva AllowOverride de apache2. Utilizando archivos .htaccess realiza las siguientes configuraciones:</p>
<ol>
<li>Habilita el listado de ficheros en la URL <a href="http://host.dominio/nas">http://host.dominio/nas</a>.</li>
</ol>
<p>Nosotros vamos a usar el hosting gratuito llamado <a href="https://es.000webhost.com/">000webhost</a> en el cual vamos a crear un host llamado <strong>francisco-htaccess</strong> en el que dentro del directorio llamado <em>public_html</em> vamos a tener el fichero ya generado de <em>.htaccess</em>:</p>
<p><img src="https://raw.githubusercontent.com/FranJaviMN/elementos-grado/main/Servicios/apache/htaccess.png" alt="htaccess"></p>
<p>Si queremos habilitar el listado de ficheros debemos de saber que directiva es la que nos permite tener el listado de los fichero que tenemos en el directorio <strong>/nas</strong>, para ello tenemos la directiva <strong>Indexes</strong> que nos permite el listado de ficheros:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">Options +Indexes
</code></pre></div><p>Lo cual, al entrar en /nas veremos que nos permite el lista de ficheros que haya en el directorio /nas:</p>
<p><img src="https://raw.githubusercontent.com/FranJaviMN/elementos-grado/main/Servicios/apache/nas-htaccess.png" alt="nas"></p>
<ol start="2">
<li>Crea una redirección permanente: cuando entremos en ttp://host.dominio/google salte a <a href="http://www.google.es">www.google.es</a>.</li>
</ol>
<p>Si queremos redireccionar vamos a hacer mediante las directivas redirect debemos de tener activado la directiva <strong>FileInfo</strong> la cual esta relacionada con el mapeo de url como son los alias, redirecciones&hellip; Nosotros en este caso lo queremos para realizar una redireccion, por lo que en nuestro fichero de .htaccess tendriamos la siguiente linea:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">AllowOverride FileInfo
Redirect <span style="color:#ae81ff">301</span> <span style="color:#e6db74">&#34;/google&#34;</span> <span style="color:#e6db74">&#34;www.google.es&#34;</span>
</code></pre></div><ol start="3">
<li>Pedir autentificación para entrar en la URL <a href="http://host.dominio/prohibido">http://host.dominio/prohibido</a>. (No la hagas si has elegido como proveedor CDMON, en la plataforma de prueba, no funciona.)</li>
</ol>
<p>Lo primero sera crear el directorio llamado <em>prohibido</em> dentro de public_html. UNa vez creado creamos un index.html con un mensaje de bienvenida. Una vez tengamos todos estos elementos debemos de pasar a la creacion del fichero con los usuarios y las claves, para ello debemos de tener instalado el paquete llamado <em>apache2-utils</em> que nos va a permitir la creacion del fichero con las claves y los usuarios:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#### Creamos el fichero ####</span>
francisco@debian10:~$ htpasswd -n fran
New password: 
Re-type new password: 
fran:$apr1$Z/qhsf3p$TpUscn5.hmJ8bLw6SkEx10

<span style="color:#75715e">#### Creamos el fichero passwd.txt con la linea que ha salido en pantalla ####</span>
fran:$apr1$Z/qhsf3p$TpUscn5.hmJ8bLw6SkEx10
</code></pre></div><p>Una vez hecho esto, dentro de la carpeta de prohibido creamos otro fichero <em>.htaccess</em> en el cual vamos a tener la siguiente linea:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">AuthType Basic
AuthName <span style="color:#e6db74">&#34;password&#34;</span>
AuthUserFile <span style="color:#e6db74">&#34;/storage/ssd5/943/15297943/passwd.txt&#34;</span>
Require valid-user
</code></pre></div><p>Donde le indicamos el tipo de autentificación, el mensaje y el fichero que debe de leer para los usuarios. Entonces si intentamos entrar en <em>/prohibido</em> nos saldra algo como lo siguiente:</p>
<p><img src="https://raw.githubusercontent.com/FranJaviMN/elementos-grado/main/Servicios/apache/passwd-htaccess.png" alt="autentificacion"></p>

  
  </div>
</article>


    <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2021  Francisco Javier Martín Núñez 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/sistemas">Sistemas</a></li>
         
        <li><a href="/seguridad">Seguridad</a></li>
         
        <li><a href="/servicios">Servicios</a></li>
         
        <li><a href="/implantacion">Implantacion</a></li>
         
        <li><a href="/bbdd">BBDD</a></li>
         
        <li><a href="/hlc">HLC</a></li>
         
        <li><a href="/cloud">Cloud</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
  
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
</html>
